{% import "controls/form_macro.html" as form with context %}
{% set prefix = "vendor" %}
{% set title = "登记新厂商信息" %}

<div id="{{ prefix }}_detail" class="modal hide fade">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3>{{ title }}</h3>
    </div>
    <div id="modal-body" class="modal-body">
        <div class="row-fluid">
            <form id="{{ prefix }}_detail_form" class="form-inline">
                <fieldset>
                    <legend style="border-bottom-style: none;"></legend>
                    {{ form.input("device_vendor_name", "厂商名称", layout_class="span10 offset1") }}
                    {{ form.input("device_vendor_contact","联系人", layout_class="span10 offset1") }}
                    {{ form.input("device_vendor_phone","联系电话", layout_class="span10 offset1") }}
                </fieldset>
            </form>
        </div>
    </div>
    <div class="modal-footer">
        <a href="#" class="btn" data-dismiss="modal" aria-hidden="true">取消</a>
        <a href="#" class="btn btn-primary" id="btn_save_vendor">添加</a>
    </div>
    <script type="text/javascript">
        $(document).ready(function(){
            $('#btn_save_vendor').click(function(e) {
                $.post('/devmgr/action/add/device_vendor', {vendor_name:$('#device_vendor_name').val(),
                            vendor_contact:$('#device_vendor_contact').val(),vendor_phone:$('#device_vendor_phone').val()},
                        function(){
                            $('#vendor_detail').modal('hide');
                        })
            })
        })
    </script>
</div>