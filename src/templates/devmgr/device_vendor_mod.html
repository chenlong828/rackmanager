{% import "controls/form_macro.html" as form with context %}
{% set prefix = "vendor" %}
{% set title = "修改指定厂商信息" %}

<div id="{{ prefix }}_detail" class="modal hide fade">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3>{{ title }}</h3>
    </div>
    <div id="modal-body" class="modal-body">
        <div class="row-fluid">
            <form id="{{ prefix }}_detail_form" class="form-inline">
                <fieldset>
                    <legend style="border-bottom-style: none;"></legend>
                    {{ form.input_ro("厂商名称", bind_data.vendor_name, "span10 offset1") }}
                    {{ form.input("device_vendor_contact", "联系人", ctrl_value = bind_data.vendor_contact, layout_class="span10 offset1") }}
                    {{ form.input("device_vendor_phone", "联系电话", ctrl_value = bind_data.vendor_phone, layout_class="span10 offset1") }}
                </fieldset>
            </form>
        </div>
    </div>
    <div class="modal-footer">
        <a href="#" class="btn" data-dismiss="modal" aria-hidden="true" data-dismiss="modal" aria-hidden="true">取消</a>
        <a href="#" class="btn btn-primary" id="btn_save_{{ prefix }}">修改</a>
    </div>
    <script type="text/javascript">
        $(document).ready(function(){
            $('#btn_save_vendor').click(function(e) {
                $.post('/devmgr/action/update/device_vendor', {vendor_id:{{ bind_data.vendor_id }},
                            vendor_contact:$('#device_vendor_contact').val(),
                            vendor_phone:$('#device_vendor_phone').val()},
                        function(){
                            $('#class_detail').modal('hide');
                        })
            })
        })
    </script>
</div>
